<app-navbar>
  <div class="container">
    <h1>Clientes</h1>
    <button (click)="openNewClientModal(createClientTemplate)">+ AÃ±adir cliente</button>
  </div>
  <div class="container">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let client of clients">
          <td>{{client.id}}</td>
          <td>{{client.name}}</td>
          <td><button class="edit-btn" (click)="openEditClientModal(client.id!, createClientTemplate)">Editar</button>
          </td>
          <td><button class="delete-btn" (click)="deleteClient(client.id!)">Borrar</button></td>
        </tr>
      </tbody>
    </table>
    <p *ngIf="!clients"><b>No hay clientes para mostrar.</b></p>
  </div>
</app-navbar>

<ng-template #createClientTemplate>
  <form [formGroup]="form" (ngSubmit)="isEditModal ? editClient() : createClient()">
    <label for="firstname">Nombre</label>
    <div class="form-group" [ngClass]="{'form-group-invalid' : isInvalidInput('name')}">
      <input required type="text" id="name" name="name" formControlName="name">
    </div>

    <p *ngIf="this.form.invalid && formSubmitted" style="color: red">Por favor complete los campos.</p>
    <button type="submit" class="submit-btn">{{isEditModal ? "Editar" : "Crear"}}</button>
  </form>
</ng-template>